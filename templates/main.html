
<!DOCTYPE html> 
<html> 
<head> 
	<title>Page Title</title> 
	<link rel="stylesheet" href="/static/jquery.mobile-1.3.0.min.css" />
     <script src="/static/jquery-1.8.2.min.js"></script>
     <script src="/static/jquery.mobile-1.3.0.min.js"></script>
       <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
     <script src="/static/jquery.ui.touch-punch.min.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1"> 
  <style>
  #draggable { width: 50px; height: 50px; padding: 0px;background: white; }
  #joystick { background: black; width: 273px; height: 200px;}
  </style>

</head> 

<body> 
<div data-role="page" id="drive">
	<div data-role="header">
		<h1>Drive Around</h1>
          <a href="/sounds/" class="ui-btn-right">Soundboard</a>
	</div><!-- /header -->

	<div data-role="content">	
{% if position == 0 %}
    <h1>Your turn to drive!</h1>
          <div id="joystick">
				<div id="draggable" class="ui-widget-content">
				hello
				</div>
		  </div>
<a href="/done" data-role="button">I'm Done!</a> 
{% else %}

        <h1>Sit tight!</h1>
        <p>you are position <em id="position">{{position}}</em> in line!<p>
        <a href="/done" data-role="button">Leave Line</a> 
{% endif %}

	</div><!-- /content -->

</div><!-- /page -->


</body>
{% if position == 0 %}
     <script src="/static/joystick.js"></script>
{% else %}
    <script>
        // Are we driving or waiting?

        // Check to see if our position in the queue changes
        setInterval(function(){
            $.getJSON('/position',function(data){
                if (data.position==0 ){
                    // It's our turn! Lets refresh the page!
                    setTimeout('location.reload()', 2000);
                } else {
                    // Update the counter
                    $("#position").html(data.position);
                }
            })
        },5000);

    </script>
{% endif %}
</html>
