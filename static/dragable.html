<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Draggable - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script src="jquery.ui.touch-punch.min.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  #draggable { width: 50px; height: 50px; padding: 0px; }
  #joystick { background: black; width: 300px; height: 300px;}
  </style>

</head>
<body>

<div id="joystick">
<div id="draggable" class="ui-widget-content">

</div>
</div>

 
  <script>
     var parent = $( "#joystick" );
     var draggable = $( "#draggable" );
     $( "#draggable" ).offset({top: (parent.height()/2)-(draggable.height()/2),left: (parent.width()/2)-(draggable.width()/2)});
  $(function() {

    $( "#draggable" ).draggable({
          containment: "parent",
          revert: true,
          drag: function(){
               var position = $(this).position();
               var parentpos= $(this).parent().position();
               var offseth = ($(this).parent().height()/2);
               var offsetw = ($(this).parent().width()/2);
               $.getJSON('/drive/'+((position.left+25)-offsetw)+'/'+((position.top+25)-offseth)+'',null);
          },
          stop:function(){
              var position = $(this).position();
               var parentpos= $(this).parent().position();
                         var offseth = ($(this).parent().height()/2);
               var offsetw = ($(this).parent().width()/2);
               $.getJSON('/drive/'+((position.left+25)-offsetw)+'/'+((position.top+25)-offseth)+'',null);
          }

     });
  });

  </script>
</body>
</html>

